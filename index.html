<!DOCTYPE html>
<html>
<head>
  <title>Number Caller With Voice (7s Gap)</title>
  <style>
    body {
      text-align: center;   /* Center everything */
      font-family: Arial, sans-serif;
    }

    button { 
      padding: 10px 20px; 
      margin: 10px; 
    }

    #current { 
      font-size: 60px; 
      margin-top: 20px; 
      font-weight: bold; 
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    /* Number Board Style */
    #board {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 5px;
      width: 80%;
      margin: 20px auto;
    }

    .cell {
      padding: 10px;
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 20px;
      text-align: center;
      font-weight: bold;
    }

    .called {
      background: #4CAF50;
      color: white;
    }
  </style>
</head>
<body>

<h2>Tambola Number Caller</h2>
<div id="current">--</div>

<button onclick="startCalling()">Start</button>
<button onclick="pauseCalling()">Pause</button>
<button onclick="resumeCalling()">Resume</button>
<button onclick="claim()">Claim</button>

<!-- Number Board -->
<div id="board"></div>

<script>
let numbers = [];
let interval;
let paused = false;

// Build number board 1–90
function createBoard() {
  let board = document.getElementById("board");
  board.innerHTML = "";
  for (let i = 1; i <= 90; i++) {
    let cell = document.createElement("div");
    cell.className = "cell";
    cell.id = "num" + i;
    cell.innerHTML = i;
    board.appendChild(cell);
  }
}
createBoard();

// Convert number to spoken English words
function numberToWords(n) {
  const words = [
    "", "One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten",
    "Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen",
    "Eighteen","Nineteen"
  ];
  const tens = ["", "", "Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];

  if (n < 20) return words[n];
  if (n < 100) return tens[Math.floor(n / 10)] + (n % 10 === 0 ? "" : " " + words[n % 10]);
  return n;
}

// Start calling numbers
function startCalling() {
  numbers = [];
  for (let i = 1; i <= 90; i++) numbers.push(i);

  interval = setInterval(() => {
    if (!paused) announceNumber();
  }, 7000); // 7-second gap
}

// Announce a new number
function announceNumber() {
  if (numbers.length === 0) return;

  const index = Math.floor(Math.random() * numbers.length);
  const number = numbers[index];
  numbers.splice(index, 1);

  document.getElementById("current").innerHTML = number;
  speak(numberToWords(number));

  // Highlight called number
  document.getElementById("num" + number).classList.add("called");
}

// Speak the number (only the name)
function speak(text) {
  let msg = new SpeechSynthesisUtterance();
  msg.text = text;   
  msg.rate = 0.9;
  msg.pitch = 1;
  msg.volume = 1;
  window.speechSynthesis.speak(msg);
}

// Pause
function pauseCalling() { paused = true; }

// Resume
function resumeCalling() { paused = false; }

// CLAIM → Auto Pause
function claim() {
  paused = true;
  alert("Claim received! Calling paused.");
}
</script>

</body>
</html>
